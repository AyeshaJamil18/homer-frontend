"use strict";

require("core-js/modules/es.object.define-property");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _interface = _interopRequireDefault(require("../interface"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Dropzone = {
  name: 'dropzone',
  props: {
    options: {
      type: Object,
      required: true
    }
  },
  data: function data() {
    return {
      id: "dz-".concat(Math.floor(Math.random() * Math.pow(10, 12))),
      dropzone: null
    };
  },
  methods: {
    initDropzone: function initDropzone() {
      var _this = this;

      // deep clone options
      var options = JSON.parse(JSON.stringify(this.options));
      options.elementId = this.id;
      this.dropzone = _interface.default.dropzone(options);
      this.dropzone.on('raw', function (_ref) {
        var action = _ref.action,
            data = _ref.data;

        if (action === 'dropzoneClicked') {
          _this.$emit('click', data);
        } else {
          _this.$emit(action, data);
        }
      });
    }
  },
  watch: {
    options: {
      handler: function handler() {
        this.dropzone.destroy();
        this.initDropzone();
      },
      deep: true
    }
  },
  template: "\n    <div\n      :id=\"id\"\n      :style=\"{'height':'100px', 'width':'600px'}\">\n    </div>",
  mounted: function mounted() {
    this.initDropzone();
  },
  destroyed: function destroyed() {
    this.dropzone.destroy();
  }
};
var _default = Dropzone;
exports.default = _default;